import{m as g,u as S,o as k,P as W,n as q}from"./index-C4Lle3dT.js";import{r as w,D as h,E,f as O,a as L,c as D,G as I,h as _,o as C,j as x,s as T,B as A,u as v,m as M,T as z}from"./index-BpwbO6jE.js";function B(i,a,t){const e=t.originalEvent.target,r=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:t});a&&e.addEventListener(i,a,{once:!0}),e.dispatchEvent(r)}const R="dismissableLayer.pointerDownOutside",K="dismissableLayer.focusOutside";function F(i,a){const t=a.closest("[data-dismissable-layer]"),e=i.dataset.dismissableLayer===""?i:i.querySelector("[data-dismissable-layer]"),r=Array.from(i.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(t&&(e===t||r.indexOf(e)<r.indexOf(t)))}function N(i,a,t=!0){const e=a?.value?.ownerDocument??globalThis?.document,r=w(!1),n=w(()=>{});return h(l=>{if(!g||!E(t))return;const o=async c=>{const p=c.target;if(!(!a?.value||!p)){if(F(a.value,p)){r.value=!1;return}if(c.target&&!r.value){let y=function(){B(R,i,b)};const b={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",n.value),n.value=y,e.addEventListener("click",n.value,{once:!0})):y()}else e.removeEventListener("click",n.value);r.value=!1}},d=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);l(()=>{window.clearTimeout(d),e.removeEventListener("pointerdown",o),e.removeEventListener("click",n.value)})}),{onPointerDownCapture:()=>{E(t)&&(r.value=!0)}}}function U(i,a,t=!0){const e=a?.value?.ownerDocument??globalThis?.document,r=w(!1);return h(n=>{if(!g||!E(t))return;const l=async o=>{if(!a?.value)return;await O(),await O();const d=o.target;!a.value||!d||F(a.value,d)||o.target&&!r.value&&B(K,i,{originalEvent:o})};e.addEventListener("focusin",l),n(()=>e.removeEventListener("focusin",l))}),{onFocusCapture:()=>{E(t)&&(r.value=!0)},onBlurCapture:()=>{E(t)&&(r.value=!1)}}}const u=I({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var H=L({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(i,{emit:a}){const t=i,e=a,{forwardRef:r,currentElement:n}=S(),l=D(()=>n.value?.ownerDocument??globalThis.document),o=D(()=>u.layersRoot),d=D(()=>n.value?Array.from(o.value).indexOf(n.value):-1),c=D(()=>u.layersWithOutsidePointerEventsDisabled.size>0),p=D(()=>{const s=Array.from(o.value),[f]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),m=s.indexOf(f);return d.value>=m}),b=N(async s=>{const f=[...u.branches].some(m=>m?.contains(s.target));!p.value||f||(e("pointerDownOutside",s),e("interactOutside",s),await O(),s.defaultPrevented||e("dismiss"))},n),y=U(s=>{[...u.branches].some(m=>m?.contains(s.target))||(e("focusOutside",s),e("interactOutside",s),s.defaultPrevented||e("dismiss"))},n);k("Escape",s=>{d.value===o.value.size-1&&(e("escapeKeyDown",s),s.defaultPrevented||e("dismiss"))});let P;return h(s=>{n.value&&(t.disableOutsidePointerEvents&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(P=l.value.body.style.pointerEvents,l.value.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(n.value)),o.value.add(n.value),s(()=>{t.disableOutsidePointerEvents&&u.layersWithOutsidePointerEventsDisabled.size===1&&(l.value.body.style.pointerEvents=P)}))}),h(s=>{s(()=>{n.value&&(o.value.delete(n.value),u.layersWithOutsidePointerEventsDisabled.delete(n.value))})}),(s,f)=>(C(),_(v(W),{ref:v(r),"as-child":s.asChild,as:s.as,"data-dismissable-layer":"",style:A({pointerEvents:c.value?p.value?"auto":"none":void 0}),onFocusCapture:v(y).onFocusCapture,onBlurCapture:v(y).onBlurCapture,onPointerdownCapture:v(b).onPointerDownCapture},{default:x(()=>[T(s.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),G=H,V=L({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(i){const a=q();return(t,e)=>v(a)||t.forceMount?(C(),_(z,{key:0,to:t.to,disabled:t.disabled,defer:t.defer},[T(t.$slots,"default")],8,["to","disabled","defer"])):M("v-if",!0)}}),J=V;export{G as D,J as T};
