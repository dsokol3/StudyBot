import{i as F}from"./nullish-CHIgUVhi.js";import{m as P,u as S,o as k,P as W,n as q}from"./index-d5CyR_L5.js";import{r as w,D as h,E as D,f as O,a as g,c as E,G as I,h as L,o as _,j as x,s as C,B as A,u as f,m as M,T as z}from"./index-ChU9sctJ.js";function B(a,r,t){const e=t.originalEvent.target,i=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:t});r&&e.addEventListener(a,r,{once:!0}),e.dispatchEvent(i)}const R="dismissableLayer.pointerDownOutside",N="dismissableLayer.focusOutside";function T(a,r){const t=r.closest("[data-dismissable-layer]"),e=a.dataset.dismissableLayer===""?a:a.querySelector("[data-dismissable-layer]"),i=Array.from(a.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(t&&(e===t||i.indexOf(e)<i.indexOf(t)))}function K(a,r,t=!0){const e=r?.value?.ownerDocument??globalThis?.document,i=w(!1),n=w(()=>{});return h(l=>{if(!P||!D(t))return;const o=async c=>{const p=c.target;if(!(!r?.value||!p)){if(T(r.value,p)){i.value=!1;return}if(c.target&&!i.value){let y=function(){B(R,a,b)};const b={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",n.value),n.value=y,e.addEventListener("click",n.value,{once:!0})):y()}else e.removeEventListener("click",n.value);i.value=!1}},d=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);l(()=>{window.clearTimeout(d),e.removeEventListener("pointerdown",o),e.removeEventListener("click",n.value)})}),{onPointerDownCapture:()=>{D(t)&&(i.value=!0)}}}function U(a,r,t=!0){const e=r?.value?.ownerDocument??globalThis?.document,i=w(!1);return h(n=>{if(!P||!D(t))return;const l=async o=>{if(!r?.value)return;await O(),await O();const d=o.target;!r.value||!d||T(r.value,d)||o.target&&!i.value&&B(N,a,{originalEvent:o})};e.addEventListener("focusin",l),n(()=>e.removeEventListener("focusin",l))}),{onFocusCapture:()=>{D(t)&&(i.value=!0)},onBlurCapture:()=>{D(t)&&(i.value=!1)}}}const u=I({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,originalBodyPointerEvents:void 0,branches:new Set});var H=g({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(a,{emit:r}){const t=a,e=r,{forwardRef:i,currentElement:n}=S(),l=E(()=>n.value?.ownerDocument??globalThis.document),o=E(()=>u.layersRoot),d=E(()=>n.value?Array.from(o.value).indexOf(n.value):-1),c=E(()=>u.layersWithOutsidePointerEventsDisabled.size>0),p=E(()=>{const s=Array.from(o.value),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),m=s.indexOf(v);return d.value>=m}),b=K(async s=>{const v=[...u.branches].some(m=>m?.contains(s.target));!p.value||v||(e("pointerDownOutside",s),e("interactOutside",s),await O(),s.defaultPrevented||e("dismiss"))},n),y=U(s=>{[...u.branches].some(m=>m?.contains(s.target))||(e("focusOutside",s),e("interactOutside",s),s.defaultPrevented||e("dismiss"))},n);return k("Escape",s=>{d.value===o.value.size-1&&(e("escapeKeyDown",s),s.defaultPrevented||e("dismiss"))}),h(s=>{n.value&&(t.disableOutsidePointerEvents&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(u.originalBodyPointerEvents=l.value.body.style.pointerEvents,l.value.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(n.value)),o.value.add(n.value),s(()=>{t.disableOutsidePointerEvents&&u.layersWithOutsidePointerEventsDisabled.size===1&&!F(u.originalBodyPointerEvents)&&(l.value.body.style.pointerEvents=u.originalBodyPointerEvents)}))}),h(s=>{s(()=>{n.value&&(o.value.delete(n.value),u.layersWithOutsidePointerEventsDisabled.delete(n.value))})}),(s,v)=>(_(),L(f(W),{ref:f(i),"as-child":s.asChild,as:s.as,"data-dismissable-layer":"",style:A({pointerEvents:c.value?p.value?"auto":"none":void 0}),onFocusCapture:f(y).onFocusCapture,onBlurCapture:f(y).onBlurCapture,onPointerdownCapture:f(b).onPointerDownCapture},{default:x(()=>[C(s.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),J=H,V=g({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(a){const r=q();return(t,e)=>f(r)||t.forceMount?(_(),L(z,{key:0,to:t.to,disabled:t.disabled,defer:t.defer},[C(t.$slots,"default")],8,["to","disabled","defer"])):M("v-if",!0)}}),Q=V;export{J as D,Q as T};
