import{c as D,a as b}from"./index-CI544GDs.js";import{a as x,w as F,v as R,u as C,o as _,b as w,n as V,i as B,r as i,c as y,C as E}from"./index-ClTQfdkw.js";import{u as L}from"./index-BpSKKMJv.js";import{u as P}from"./generation-vZgq8BSd.js";import{u as A,s as H}from"./notes-Ck3FR9yN.js";const N=D("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),U=x({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(r,{emit:s}){const u=r,a=L(u,"modelValue",s,{passive:!0,defaultValue:u.defaultValue});return(l,o)=>F((_(),w("textarea",{"onUpdate:modelValue":o[0]||(o[0]=d=>B(a)?a.value=d:null),class:V(C(b)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",u.class))},null,2)),[[R,C(a)]])}}),$=x({__name:"Skeleton",props:{class:{}},setup(r){const s=r;return(u,c)=>(_(),w("div",{"data-slot":"skeleton",class:V(C(b)("animate-pulse rounded-md bg-primary/10",s.class))},null,2))}});function q(r){const s=P(),u=A(),c=i(!1),a=i(!0),l=i(null),o=i(null),d=i(""),f=i(""),g=y(()=>f.value?.trim()?f.value:u.notes.map(e=>e.content||"").filter(e=>e.trim()).join(`

---

`));async function v(){try{a.value=!0;const e=await H.getAllDocumentContents("default");return f.value=e,e}catch(e){return console.error("Failed to fetch content from backend:",e),""}finally{a.value=!1}}E(()=>{v()});const p=y(()=>s.getFromHistory(r));p.value&&(o.value=p.value.result);async function k(e,n){c.value=!0,l.value=null;try{let t=e||d.value;if(t?.trim()||(t=await v()),t?.trim()||(t=g.value),!t?.trim())return l.value="Please upload some documents first, or paste content to generate from",null;const m={...n?.additionalParams||{}};n?.easyCount!==void 0&&(m.easyCount=n.easyCount),n?.mediumCount!==void 0&&(m.mediumCount=n.mediumCount),n?.hardCount!==void 0&&(m.hardCount=n.hardCount);const h=await s.generate(r,t,{force:n?.force,additionalParams:m});return o.value=h,h}catch(t){return l.value=t instanceof Error?t.message:"Failed to generate content",null}finally{c.value=!1}}function S(){l.value=null}function M(){o.value=null}return{isLoading:c,isLoadingContent:a,error:l,result:o,selectedContent:d,notesContent:g,previousResult:p,generate:k,fetchContentFromBackend:v,clearError:S,clearResult:M}}export{N as D,U as _,$ as a,q as u};
