import{c as T,a as _}from"./index-Cf8dpYKy.js";import{a as x,w as D,v as F,u as C,o as w,b as V,n as k,i as L,r as i,c as b,C as N}from"./index-mcUVKpX-.js";import{u as R}from"./index--bcDcqlN.js";import{u as A}from"./generation-CueMU9yZ.js";import{u as B,s as H}from"./notes-Cnf6t-Lc.js";const I=T("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),O=x({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(r,{emit:s}){const l=r,a=R(l,"modelValue",s,{passive:!0,defaultValue:l.defaultValue});return(u,o)=>D((w(),V("textarea",{"onUpdate:modelValue":o[0]||(o[0]=d=>L(a)?a.value=d:null),class:k(C(_)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",l.class))},null,2)),[[F,C(a)]])}}),U=x({__name:"Skeleton",props:{class:{}},setup(r){const s=r;return(l,c)=>(w(),V("div",{"data-slot":"skeleton",class:k(C(_)("animate-pulse rounded-md bg-primary/10",s.class))},null,2))}});function X(r){const s=A(),l=B(),c=i(!1),a=i(!0),u=i(null),o=i(null),d=i(""),f=i(""),h=b(()=>f.value?.trim()?f.value:l.notes.map(t=>t.content||"").filter(t=>t.trim()).join(`

---

`));async function p(){try{a.value=!0;const t=await H.getAllDocumentContents("default");return f.value=t,t}catch(t){return console.error("Failed to fetch content from backend:",t),""}finally{a.value=!1}}N(()=>{p()});const v=b(()=>s.getFromHistory(r));v.value&&(o.value=v.value.result);async function M(t,n){c.value=!0,u.value=null;try{let e=t||d.value;e?.trim()||(e=await p()),e?.trim()||(e=h.value);const g=8e3;if(e.length>g&&(console.warn(`Content too long (${e.length} chars), truncating to ${g}`),e=e.substring(0,g)+`

[Content truncated for processing...]`),!e?.trim())return u.value="Please upload some documents first, or paste content to generate from",null;const m={...n?.additionalParams||{}};n?.easyCount!==void 0&&(m.easyCount=n.easyCount),n?.mediumCount!==void 0&&(m.mediumCount=n.mediumCount),n?.hardCount!==void 0&&(m.hardCount=n.hardCount);const y=await s.generate(r,e,{force:n?.force,additionalParams:m});return o.value=y,y}catch(e){return u.value=e instanceof Error?e.message:"Failed to generate content",null}finally{c.value=!1}}function S(){u.value=null}function E(){o.value=null}return{isLoading:c,isLoadingContent:a,error:u,result:o,selectedContent:d,notesContent:h,previousResult:v,generate:M,fetchContentFromBackend:p,clearError:S,clearResult:E}}export{I as D,O as _,U as a,X as u};
